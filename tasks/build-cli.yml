description: "Builds CLI"
name: build-cli

parameters:
  - name: docker_hub_username
    secret: true
  - name: docker_hub_password
    secret: true

docker:
  registries:
    - use: civelocity/auth-docker-hub
      arguments:
        USERNAME: ${docker_hub_username}
        PASSWORD: ${docker_hub_password}

steps: 

  - type: build
    description: Build release image
    dockerfile: test.Dockerfile
    context: ./backend
    tags:
      - vjftw/test:${GIT_DESCRIBE}

  - type: push
    description: Pushes built image
    tags:
      - vjftw/test:${GIT_DESCRIBE}
